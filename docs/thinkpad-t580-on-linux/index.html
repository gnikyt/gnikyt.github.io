<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>
      Thinkpad T580 on Linux | gnikyt
    </title>
    <link href="https://gnikyt.com/thinkpad-t580-on-linux" rel="canonical">
    <meta content="Custom" name="generator">
    <meta content=
    "Lenovo is known for creating configurable machines that are great for both business and consumers, which are easily extendable or fixabl..."
    name="description">
    <meta content="2019-01-08T19:44:11-0330" property="article:published_time">
    <meta content="Thinkpad T580 on Linux" property="og:title">
    <meta content="en" property="og:locale">
    <meta content=
    "Lenovo is known for creating configurable machines that are great for both business and consumers, which are easily extendable or fixabl..."
    property="og:description">
    <meta content="https://gnikyt.com/thinkpad-t580-on-linux" property="og:url">
    <meta content="gnikyt" property="og:site_name">
    <meta content="article" property="og:type">
    <meta content="summary" name="twitter:card">
    <meta content=
    "Lenovo is known for creating configurable machines that are great for both business and consumers, which are easily extendable or fixabl..."
    property="twitter:title">
    <script type="application/ld+json">
    {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "dateModified": "2019-01-08T19:44:11-0330",
    "datePublished": "2019-01-08T19:44:11-0330",
    "description": "
    Lenovo is known for creating configurable machines that are great for both business and consumers, which are easily extendable or fixabl...",
    "headline": "Thinkpad T580 on Linux",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://gnikyt.com/thinkpad-t580-on-linux"
    },
    "publisher": {
      "@type": "Organization",
      "logo": {
        "@type": "ImageObject",
        "url": "https://gnikyt.com/assets/favicon-32x32.png"
      }
    },
    "url": "https://gnikyt.com/thinkpad-t580-on-linux"
    }
    </script>
    <link href="/assets/images/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link href="/assets/images/favicon.png" rel="icon" sizes="32x32" type="image/png">
    <link href="/rss.xml" rel="alternate" title="gnikyt feed" type="application/rss+xml">
    <link href="/assets/styles/normalize.css" rel="stylesheet">
    <link href="/assets/styles/concrete.css" rel="stylesheet">
    <link href="/assets/styles/style.css" rel="stylesheet">
  </head>
  <body class="layout layout--post" data-handle="thinkpad-t580-on-linux">
    <header class="site-head container">
      <span class="site-head__item"><a class="site-head__link" href="/">gnikyt</a></span> <span class=
      "site-head__item">Code ramblings.</span>
    </header>

    <main class="container">
      <article class="post">
        <header class="post__head">
          <h1 class="post__title">
            Thinkpad T580 on Linux
          </h1>

          <p class="post__meta">
            <time class="post__time" datetime="2019-01-08">Jan 08, 2019</time> â€” <span class="post__size">5.9KB</span>
          </p>
        </header>

        <p>
          Lenovo is known for creating configurable machines that are great for both business and consumers, which are
          easily extendable or fixable by the average user thanks to their documentation and sane build.
        </p>

        <p>
          They're also one of the very few vendors, if not the only, to claim Linux compatibility ("out of the box"
          working) for <a href="https://support.lenovo.com/ca/en/solutions/pd031426">many models</a>.
        </p>

        <h2 id="my-machine">
          My Machine
        </h2>

        <ul>
          <li>Lenovo ThinkPad T580 (2018)
          </li>

          <li>32GB RAM
          </li>

          <li>500GB SSD
          </li>

          <li>15.6" UHD matte screen
          </li>

          <li>Intel i7-8650U CPU @ 1.90GHZ x 8
          </li>

          <li>Intel UHD 620 (Kabylake) / Nvidia MX150
          </li>

          <li>Fingerprint reader
          </li>

          <li>Lenovo USB-C Dock
          </li>
        </ul>

        <h2 id="distro-choice">
          Distro Choice
        </h2>

        <h3 id="history">
          History
        </h3>

        <p>
          I've been around the block when it comes to Linux, used it for over a decade, with 2003 being my first
          self-installation experience. It was a tough experience at that, head diving into non-GUI command line
          installations, partitioning, and many pages of installation manuals to read over.
        </p>

        <p>
          I've tried everything from FreeBSD, Debian, Fedora, DSL, Redhat, OpenSUSE, Gentoo, Ubuntu, Slackware,
          Mandriva, Arch, and more. Hell, I even tried out Linux from Scratch for fun!
        </p>

        <p>
          All that distro-hopping gained me a lot of experience, and by experience I mean the type of experience you
          gain when your system crashes for some random reason, becomes unusable, random annoyances you have/want to
          solve. Many of these distros I stuck with and used for years happily.
        </p>

        <p>
          However, the last few years (if you can tell from my posts), I've been in the land of Mac and Windows...
          simply because at the time, I needed things to "just work" and being as mobile as I was, I couldn't afford my
          machine failing on me during a presentation or on-site job. I didn't even trust the ol' Debian route out of
          that fear.
        </p>

        <h3 id="change">
          Change
        </h3>

        <p>
          Not to knock Mac or Windows, they're fine systems and you can get the job done on both through many of the
          tools available these days such as Vagrant, Docker, or even Microsoft's new WSL; but it just doesn't feel
          like home. You don't feel the control or the fullness open source software can bring you.
        </p>

        <p>
          With my new T580, I decided to change that and get back on Linux - bite the bullet and make the system work
          but also trustworthy.
        </p>

        <p>
          Thought a lot of research, trial, and error, I ended up choosing <a href=
          "https://system76.com/pop">Pop!_OS</a>. Its a distro based upon Ubuntu with many patches to assist in things
          like multi-DPI, Intel/Nvidia graphics switching, custom beautiful theming/icons, and sane defaults. Its the
          distro they pack into their own System76 machines.
        </p>

        <h2 id="installation">
          Installation
        </h2>

        <p>
          Installation was pretty simple, Pop's installer is well made, easy to follow, and clean.
        </p>

        <p>
          Before beginning installation, I did the following:
        </p>

        <ul>
          <li>Wrote Pop to a USB stick
          </li>

          <li>Disabled Secure Boot in the BIOs
          </li>

          <li>Disabled Window's paging
          </li>

          <li>Disabled Window's restore point
          </li>

          <li>Shrunk Windows partition (through Windows Disk Management) to a bare minimum
          </li>
        </ul>

        <p>
          Next:
        </p>

        <ul>
          <li>Created a EXT4 partition from the unallocated space
          </li>

          <li>Set Pop to use the new partition for the boot
          </li>

          <li>Set Pop to use the existing EFI partition
          </li>
        </ul>

        <p>
          Pop then installed the system successfully and created a default boot entry.
        </p>

        <p>
          Everything upon boot worked. Screens, WIFI, Bluetooth, etc.
        </p>

        <h2 id="tweaks">
          Tweaks
        </h2>

        <p>
          To make the most out of the ThinkPads, you should install the following.
        </p>

        <h4 id="tlp">
          TLP
        </h4>

        <p>
          TLP is a power-saving utility with special additions for Thinkpads. Such as battery thresholds, statistics,
          charging plans, recalibration, and more.
        </p>

        <p>
          <code>sudo apt install tlp</code>
        </p>

        <p>
          With this, you should also install the kernel modules for thresholds to work.
        </p>

        <p>
          <code>sudo apt install tp-smapi-dms</code>
        </p>

        <p>
          <code>sudo modprobe tp-smapi</code>
        </p>

        <p>
          For more information visit the <a href=
          "https://linrunner.de/en/tlp/docs/tlp-linux-advanced-power-management.html">TLP webpage</a>.
        </p>

        <h4 id="audio">
          Audio
        </h4>

        <p>
          With the newer ThinkPads, Lenovo ships them with Dolby Digital assistant for Windows to make the built-in
          speakers sound beefy. On Pop (any others), the speaker will sound average... even lame.
        </p>

        <p>
          To help with this, we can install PulseEffects. This is a complete tool for managing the audio output,
          allowing you to adjust and save/load presets to your liking.
        </p>

        <p>
          <code>sudo apt install pulseeffects</code>
        </p>

        <p>
          Once installed I recommend you check out <a href="https://github.com/JackHack96/PulseEffects-Presets">this
          repository on Github</a> for some great ready-made presets. I recommend <em>Perfect EQ</em>.
        </p>

        <p>
          Now, your speakers, and even other audio devices will sound great!
        </p>

        <h4 id="wayland">
          Wayland
        </h4>

        <p>
          If you have an Intel graphics card like me, then you're able to use Wayland.
        </p>

        <p>
          <code>sudo nano /etc/gdm3/custom.conf</code>
        </p>

        <p>
          Find <code>WaylandEnable=false</code> and commend it out: <code>#WaylandEndable=false</code>. Then,
          <code>sudo systemctl restart gdm.service</code>.
        </p>

        <p>
          You should now be logged out and a visible cog icon should show next to "Login". Click it and select "Pop
          (Wayland)".
        </p>

        <p>
          The only downfall is Firefox (and Chrome), as well as Thunderbird, do not support the scaling properly yet.
          I've heard the nightly edition of Firefox does solve these issues, however.
        </p>

        <p>
          Given those scaling issues, I personally remain on the default Xorg for now. Which is totally fine! Pop has a
          great daemon running to detect when you plug in mixed DPI screens to the laptop. It will automatically adjust
          the resolutions to match so you won't have scaling issues.
        </p>

        <h4 id="nvidia">
          Nvidia
        </h4>

        <p>
          As of writing, you can install the <code>nvidia-410</code> driver which works fine for the MX150.
        </p>

        <p>
          Running <code>sudo powertop</code> and switching to the tunables tab, you should see a "BAD" status for the
          Nvidia power management. Simply click enter, to check it from bad to good. Using the recommended changes, my
          power usage for Nvidia (7-9W) closely matches Intel (6-8W of usage).
        </p>

        <h2 id="a-month-later">
          A Month Later
        </h2>

        <p>
          It's now been a month and I've experienced no issues besides the rare issue of the desktop freezing sometimes
          when I plug in my USB-C dock, or monitors not waking up.
        </p>

        <p>
          Overall, Pop is a great polished distro with a lot of care put into its end-to-end process from installation
          to the end-user experience with the polished custom themeing. Give it a try!
        </p>

        <footer class="post__tail">
          <div class="sources">
            <a class="sources__link" href="/thinkpad-t580-on-linux/index.md">MD</a> | <a class="sources__link" href=
            "/thinkpad-t580-on-linux/index.txt">TXT</a> | <a class="sources__link" href=
            "https://creativecommons.org/licenses/by/4.0/" rel="noopener" target="_blank">CC-4.0</a>
          </div>

          <div class="warning warning--post">
            This post is 6 years old and may contain outdated information.
          </div>
        </footer>
      </article>
    </main>

    <footer class="site-tail container">
      <hr class="site-tail__sep">
      <a href="/about"><img alt="Ty King" class="site-tail__avatar" src="/assets/images/me.jpg"></a>
      <div class="site-tail__inner">
        <h3 class="site-tail__author">
          Ty King
        </h3>

        <p>
          A self-taught, seasoned, and versatile developer from Newfoundland. Crafting innovative solutions with care
          and expertise.
        </p>
        <a class="button" href="https://github.com/gnikyt" rel="noopener" target="_blank">Github</a> <a class="button"
        href="/about">About Me</a> <a class="button" href="/assets/files/cv.pdf" target="_blank">CV</a> <a class=
        "button" href="/rss.xml" target="_blank">RSS</a>
        <ul class="site-colors">
          <li class="site-colors__color color--a">
          </li>

          <li class="site-colors__color color--b">
          </li>

          <li class="site-colors__color color--c">
          </li>

          <li class="site-colors__color color--d">
          </li>

          <li class="site-colors__color color--e">
          </li>

          <li class="site-colors__color color--f">
          </li>
        </ul>
      </div>
    </footer>
  </body>
</html>
