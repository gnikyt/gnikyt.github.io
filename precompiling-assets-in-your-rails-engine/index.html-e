<!DOCTYPE html>
<html>
<head>
	<!-- Theme: Attila by zutrinken, powered by: Ghost -->
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

	<title>Precompiling Assets In Your Rails Engine</title>

	<meta name="HandheldFriendly" content="True" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<link rel="stylesheet" type="text/css" href="../assets/css/style.css?v=4f8314772c" />

	<link rel="shortcut icon" href="../favicon.png" type="image/png" />
    <link rel="canonical" href="index.html" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="amp/index.html" />
    
    <meta property="og:site_name" content="OhMyBrew!" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Precompiling Assets In Your Rails Engine" />
    <meta property="og:description" content="This&#x27;ll be a quick post to highlight an issue I had where I needed to precompile an asset file for my Rails engine that was not to be compiled with the other engine assets. Recently, I added TinyMCE-Rails to Guts instead of rolling it in on its own. This allows" />
    <meta property="og:url" content="https://ohmybrew.com/precompiling-assets-in-your-rails-engine/" />
    <meta property="article:published_time" content="2016-05-03T23:26:22.000Z" />
    <meta property="article:modified_time" content="2018-02-21T16:18:48.000Z" />
    <meta property="article:tag" content="tip" />
    <meta property="article:tag" content="programming" />
    <meta property="article:tag" content="ruby" />
    <meta property="article:tag" content="rails" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Precompiling Assets In Your Rails Engine" />
    <meta name="twitter:description" content="This&#x27;ll be a quick post to highlight an issue I had where I needed to precompile an asset file for my Rails engine that was not to be compiled with the other engine assets. Recently, I added TinyMCE-Rails to Guts instead of rolling it in on its own. This allows" />
    <meta name="twitter:url" content="https://ohmybrew.com/precompiling-assets-in-your-rails-engine/" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Tyler King" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="tip, programming, ruby, rails" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "OhMyBrew!",
        "logo": {
            "@type": "ImageObject",
            "url": "https://ohmybrew.com/favicon.png",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "Tyler King",
        "image": {
            "@type": "ImageObject",
            "url": "//www.gravatar.com/avatar/b866d161c9f02b7384a0940cb07135bc?s=250&d=mm&r=x",
            "width": 250,
            "height": 250
        },
        "url": "https://ohmybrew.com/author/tyler-king/",
        "sameAs": [
            "https://ohmybrew.com"
        ]
    },
    "headline": "Precompiling Assets In Your Rails Engine",
    "url": "https://ohmybrew.com/precompiling-assets-in-your-rails-engine/",
    "datePublished": "2016-05-03T23:26:22.000Z",
    "dateModified": "2018-02-21T16:18:48.000Z",
    "keywords": "tip, programming, ruby, rails",
    "description": "This&#x27;ll be a quick post to highlight an issue I had where I needed to precompile an asset file for my Rails engine that was not to be compiled with the other engine assets. Recently, I added TinyMCE-Rails to Guts instead of rolling it in on its own. This allows",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://ohmybrew.com/"
    }
}
    </script>

    <script type="text/javascript" src="../public/ghost-sdk.js?v=4f8314772c"></script>
<script type="text/javascript">
ghost.init({
	clientId: "ghost-frontend",
	clientSecret: "af2244026b4c"
});
</script>
    <meta name="generator" content="Ghost 1.21" />
    <link rel="alternate" type="application/rss+xml" title="OhMyBrew!" href="../rss/index.html" />
    <script async src="https://www.google-analytics.com/analytics.js"></script>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-101589108-1', 'auto');
    ga('send', 'pageview');
</script>
</head>

<body class="post-template tag-tip tag-programming tag-ruby tag-rails-4">
	
	<nav id="menu">
	<a class="close-button">Close</a>
	<div class="nav-wrapper">
		<p class="nav-label">Menu</p>
		<ul>
			<li class="nav-home" role="presentation"><a href="../index.html">Home</a></li>
			<li class="nav-github" role="presentation"><a href="https://github.com/ohmybrew"><i class="ic ic-star"></i> Github</a></li>
			
			<li class="nav-rss"><a href="../rss/index.html"><i class="ic ic-rss"></i> Subscribe</a></li>
		</ul>
	</div>
</nav>
	
	<section id="wrapper">
		<a class="hidden-close"></a>
		

<div class="progress-container">
	<span class="progress-bar"></span>
</div>

<header id="post-header">
	<div class="inner">
		<nav id="navigation">
			<span id="home-button" class="nav-button">
				<a class="home-button" href="../index.html" title="Home"><i class="ic ic-arrow-left"></i> Home</a>
			</span>
			<span id="menu-button" class="nav-button">
				<a class="menu-button"><i class="ic ic-menu"></i> Menu</a>
			</span>
		</nav>
		<h1 class="post-title">Precompiling Assets In Your Rails Engine</h1>
		<span class="post-meta"><a href="../author/tyler-king/index.html">Tyler King</a> | <time datetime="2016-05-03">03 May 2016</time></span>
		
	</div>
</header>

<main class="content" role="main">
	<article class="post tag-tip tag-programming tag-ruby tag-rails-4">
		<div class="inner">

			<section class="post-content">
				<div class="kg-card-markdown"><p>This'll be a quick post to highlight an issue I had where I needed to precompile an asset file for my Rails engine that was not to be compiled with the other engine assets.</p>
<p>Recently, I added <a href="https://github.com/spohlenz/tinymce-rails">TinyMCE-Rails</a> to Guts instead of rolling it in on its own. This allows me to abstract TinyMCE so its handled by the gem, and allows users to provide their own customizations and configurations.</p>
<p>Previously, I had a custom plugin which was hard-coded into TinyMCE as a simple button to allow users to add media from Guts into the editor. Now, using the gem, I need to make this a plugin, but I found issues getting the plugin file into production… it would never appear in <code>shared/public</code> when deploying the website via Capistrano after precompile ran. I was frustrated at first but knew it had to be simple answer, I just needed to tell Rails about the file.</p>
<p>This was the directory structure:</p>
<pre><code class="language-conf">app/
	assets/
		javascripts/
        	guts/
            	...
        tinymce/
        	plugins/
            	guts_media/
                	plugin.js
</code></pre>
<p>I needed my <code>tinymce/plugins/</code> folder to move into <code>public/assets/tinymce</code> generated by the TinyMCE gem.</p>
<p>After trial and error, the answer was simple and stupid… why didn't I think of it before. I simply need to open my engine's file and append my plugin path to <code>assets.precompile</code> provided by Rails. Here was the final working result (bottom of file):</p>
<pre><code class="language-ruby"># Guts' module namespace
module Guts 
  # Guts' engine class
  class Engine &lt; ::Rails::Engine
    # Isolate Guts routes
    isolate_namespace Guts
    
    # Autoload concerns
    config.autoload_paths &lt;&lt; &quot;#{config.root}/app/concerns&quot;
    
    # Allow decorator usage for extending Guts
    config.to_prepare do
      Dir.glob(&quot;#{Rails.root}/app/decorators/*/guts/*_decorator*.rb&quot;).each do |c|
        require_dependency(c)
      end
    end
    
    # Load in our custom assets to precompile
    config.assets.precompile &lt;&lt; &quot;#{config.root}/app/assets/javascripts/tinymce/plugins/guts_media/plugin.js&quot;
  end
end
</code></pre>
<p>I hope this helps anyone else stuck in a similar situation.</p>
</div>
			</section>

			<section class="post-info">

				<div class="post-share">
					<a class="twitter" href="https://twitter.com/share?text=Precompiling Assets In Your Rails Engine&url=https://ohmybrew.com/precompiling-assets-in-your-rails-engine/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
						<i class="ic ic-twitter"></i><span class="hidden">Twitter</span>
					</a>
					<a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://ohmybrew.com/precompiling-assets-in-your-rails-engine/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
						<i class="ic ic-facebook"></i><span class="hidden">Facebook</span>
					</a>
					<a class="googleplus" href="https://plus.google.com/share?url=https://ohmybrew.com/precompiling-assets-in-your-rails-engine/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
						<i class="ic ic-googleplus"></i><span class="hidden">Google+</span>
					</a>
					<div class="clear"></div>
				</div>

				<aside class="post-tags">
					<a href="../tag/tip/index.html">tip</a> <a href="../tag/programming/index.html">programming</a> <a href="../tag/ruby/index.html">ruby</a> <a href="../tag/rails-4/index.html">rails</a>
				</aside>

				<div class="clear"></div>

				<aside class="post-author">
					<figure class="post-author-avatar avatar">
							<img src="http://www.gravatar.com/avatar/b866d161c9f02b7384a0940cb07135bc?s=250&amp;d=mm&amp;r=x" alt="Tyler King" />
					</figure>
					<div class="post-author-bio">
						<h4 class="post-author-name"><a href="../author/tyler-king/index.html">Tyler King</a></h4>
							<p class="post-author-about">I'm a loving father, passionate homebrewer, motorcycle rider, and of course.. a coder. I develop solutions through experience.</p>
							<span class="post-author-location"><i class="ic ic-location"></i> Newfoundland</span>
							<span class="post-author-website"><i class="ic ic-link"></i> <a href="https://ohmybrew.com">Website</a></span>
					</div>
					<div class="clear"></div>
				</aside>

			</section>


			<section class="post-comments">
				<a id="show-disqus" class="post-comments-activate">Show Comments</a>
			    <div id="disqus_thread"></div>
			</section>


			<aside class="post-nav">
					<a class="post-nav-next" href="../testing-with-shopify-app/index.html">
						<section class="post-nav-teaser">
							<i class="ic ic-arrow-left"></i>
							<h2 class="post-nav-title">Testing with shopify_app</h2>
							<p class="post-nav-excerpt">shopify_app is a great Gem to quickly build a Shopify App&hellip;</p>
						</section>
					</a>
					<a class="post-nav-prev" href="../guts-now-with-multisite/index.html">
						<section class="post-nav-teaser">
							<i class="ic ic-arrow-right"></i>
							<h2 class="post-nav-title">Guts: With Multisite</h2>
							<p class="post-nav-excerpt">This is just a quick and proud update that I've released a&hellip;</p>
						</section>
					</a>
				<div class="clear"></div>
			</aside>


		</div>
	</article>
</main>


		<div id="body-class" style="display: none;" class="post-template tag-tip tag-programming tag-ruby tag-rails-4"></div>
	
		<footer id="footer">
			<div class="inner">
			</div>
		</footer>
	</section>

	<script type="text/javascript" src="../assets/js/script.js?v=4f8314772c"></script>

	
</body>
</html>
